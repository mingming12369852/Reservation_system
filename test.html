<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://apis.google.com/js/platform.js?onload=init" async defer></script>
	<meta name="google-signin-client_id"
		content="222409392061-rute8gftvgj8tv1710kgnlnrgouera54.apps.googleusercontent.com">
	<script src='//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js'></script>
	<script>
		/*
		$.ajax({
			type: "post",
			data: {
				"method": "write",
				"name": "Wayne",
				"sex": "male",
				"remark": "測試寫入功能"
			},
			url: "https://script.google.com/macros/s/AKfycbxa-opIfGUszxHf6VPlddFBGr05GthmGCJpi3JkRHg/dev" // 填入網路應用程式網址
		});
		*/

		$.ajax({

			type: "get",
			headers: {'Access-Control-Allow-Origin':'*' },
			dataType:"jsonp",
			url: "https://script.google.com/macros/s/AKfycbxa-opIfGUszxHf6VPlddFBGr05GthmGCJpi3JkRHg/dev",
			success: function (jsondata) {
				console.log(jsondata);
			}

		});

	</script>
</head>

<body>
	<div class="g-signin2" data-onsuccess="onSignIn"></div>
	<script>
		function onSignIn(googleUser) {
			var profile = googleUser.getBasicProfile();
			console.log("test2")
			console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
			console.log('Name: ' + profile.getName());
			console.log('Image URL: ' + profile.getImageUrl());
			console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
			var id_token = googleUser.getAuthResponse().id_token;
			console.log("ID Token: " + id_token);
			console.log('test11')
			var test = gapi.client.request({
				path: "https://script.google.com/macros/s/AKfycbwG0we5gamMLgBmve5cZX8jt1IElLwN1FCENNq-j5hoxZ0dZCaenNPbW-INs6tP_jKA/exec",
				method: "post",
				params: {}
			})
			test.execute(function (response) {
				console.log(request);
			});
		}
		// console.log('test22')
		// var request = gapi.client.request({
		// 	'method': 'GET',
		// 	'path': '/drive/v3/about',
		// 	'params': { 'fields': 'user' }
		// });
		// // Execute the API request.
		// request.execute(function (response) {
		// 	console.log(response);
		// });

	</script>
	<button id="login-button" disabled>Login with Google</button>
</body>

</html>
